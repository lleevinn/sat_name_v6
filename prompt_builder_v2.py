"""
PROMPT BUILDER v2.0 - –£–ú–ù–´–ï –í–ê–†–¨–ò–†–£–Æ–©–ò–ï–°–Ø –ü–†–û–ú–ü–¢–´
–°–æ–∑–¥–∞—ë—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è IRIS
–ù–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, —ç–º–æ—Ü–∏–∏, –∏—Å—Ç–æ—Ä–∏—é
"""

from typing import Dict, List, Optional
from enum import Enum
import random
from datetime import datetime


class PromptVariety(Enum):
    """–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ñ—Ä–∞–∑ (—á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–ª–∞—Å—å)"""
    EXCITED = "excited"  # –í–æ–∑–±—É–∂–¥–µ–Ω–Ω–∞—è, —ç–Ω–µ—Ä–≥–∏—á–Ω–∞—è
    SUPPORTIVE = "supportive"  # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è, –º–æ—Ç–∏–≤–∏—Ä—É—é—â–∞—è
    ANALYTICAL = "analytical"  # –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è, —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è
    SARCASTIC = "sarcastic"  # –°–∞—Ä–∫–∞—Å—Ç–∏—á–Ω–∞—è, –ø—Ä–∏–∫–æ–ª—å–Ω–∞—è
    TENSE = "tense"  # –ù–∞–ø—Ä—è–∂–µ–Ω–Ω–∞—è, —Å—Ä–æ—á–Ω–∞—è
    CALM = "calm"  # –°–ø–æ–∫–æ–π–Ω–∞—è, —É–≤–µ—Ä–µ–Ω–Ω–∞—è


class SmartPromptBuilder:
    """–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–æ–º–ø—Ç–æ–≤"""
    
    def __init__(self):
        self.prompt_counter = 0
        self.last_prompts = []
    
    # ============================================================
    # –ö–ò–õ–õ –ü–†–û–ú–ü–¢–´ - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤–∞—Ä—å–∏—Ä–æ–≤–∞–Ω–∏–µ
    # ============================================================
    
    KILL_PROMPTS_SINGLE = [
        "–û–¥–∏–Ω —Ñ—Ä–∞–≥ –≤ –∫–æ–ø–∏–ª–∫—É! –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫ –ø–æ–≤–µ—Ä–∂–µ–Ω!",
        "–ö–∏–ª–ª! –û—Ä—É–∂–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ!",
        "–£–ª–æ–∂–∏–ª –≤—Ä–∞–≥–∞! –•–æ—Ä–æ—à–∏–π –≤—ã—Å—Ç—Ä–µ–ª!",
        "–ü–∏—Å—Ç–æ–ª–µ—Ç –Ω–µ –ø–æ–¥–≤–µ–ª! –û—á–µ—Ä–µ–¥–Ω–æ–π —Ñ—Ä–∞–≥!",
        "–û–¥–∏–Ω –≤—Ä–∞–≥ –º–∏–Ω—É—Å! –î–µ–π—Å—Ç–≤—É–π –¥–∞–ª—å—à–µ!",
        "–§—Ä–∞–≥ –∑–∞—Å—á–∏—Ç–∞–Ω! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!",
        "–ù—É –≤–æ—Ç, –µ—â—ë –æ–¥–∏–Ω. –ö–∞–∫–æ–π —è –º–æ–ª–æ–¥–µ—Ü!",
        "–ö–∏–ª–ª –ø–æ–ª—É—á–∏–ª—Å—è. –ú–æ–∂–Ω–æ –ø–æ—Ö–≤–∞–ª–∏—Ç—å —Å–µ–±—è?",
        "–í—Ä–∞–≥ —É–ø–∞–ª. –°–ø–∞—Å–∏–±–æ, —á—Ç–æ –Ω–µ —Å–ø—Ä—è—Ç–∞–ª—Å—è!",
        "–û–¥–∏–Ω —Ñ—Ä–∞–≥... –ú–æ–∂–µ—Ç, –µ—â—ë –æ–¥–∏–Ω? üòè",
        "–ö–∏–ª–ª. –û—Ä—É–∂–∏–µ –µ—â—ë —Ö–æ—Ä–æ—à–µ–µ? –ü—Ä–æ–≤–µ—Ä–∏–º!",
        "–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫ —É–Ω–∏—á—Ç–æ–∂–µ–Ω. –≠–∫–æ–Ω–æ–º—å –ø–∞—Ç—Ä–æ–Ω—ã!",
        "–§—Ä–∞–≥ –∑–∞—Å—á–∏—Ç–∞–Ω. –ü–æ–∑–∏—Ü–∏—é –º–µ–Ω—è–π!",
    ]
    
    KILL_PROMPTS_DOUBLE = [
        "–î–í–û–ô–ù–û–ô –ö–ò–õ–õ! –î–≤–∞ –≤—Ä–∞–≥–∞ –≤ –ø—Ä–∞—Ö! –¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å!",
        "–î–ê–ë–õ! –•–æ—Ä–æ—à–∏–π —Ä–µ—Ñ–ª–µ–∫—Å! –ü—Ä–æ–¥–æ–ª–∂–∞–π!",
        "–î–≤–æ–π–∫–∞! –í–æ—Ç —ç—Ç–æ —Ä–∞–∑–º–∞—Ö! –î–≤–∞ —Å –æ–¥–Ω–æ–≥–æ –∫–ª–∏–ø–∞!",
        "–î–í–ê –ö–ò–õ–õ–ê! –í—Ä–∞–≥–∏ –Ω–µ –æ–∂–∏–¥–∞–ª–∏ —Ç–∞–∫–æ–≥–æ! üî•",
        "–î–≤–µ –≥–æ–ª–æ–≤—ã —Å–ª–µ—Ç–µ–ª–∏! –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!",
    ]
    
    KILL_PROMPTS_TRIPLE = [
        "–¢–†–û–ô–ù–û–ô –ö–ò–õ–õ!!! –¢—Ä–∏ –≤—Ä–∞–≥–∞ –∑–∞ –º–∏–≥! –ë–û–ò–®–¨?!",
        "–¢–†–ò–ü–õ! –ß–¢–û –≠–¢–û –ë–´–õ–û?! –¢—Ä–∏ —É–±–∏–π—Å—Ç–≤–∞ –ø–æ–¥—Ä—è–¥!",
        "–ù–ï–í–ï–†–û–Ø–¢–ù–û! –¢—Ä–∏ —Ñ—Ä–∞–≥–∞ –∑–∞ –æ–¥–Ω—É —Å–µ—Ä–∏—é!",
        "–¢–†–Å–• –£–õ–û–ñ–ò–õ! –í—Ä–∞–≥–∏ –≤–æ–æ–±—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ –º–µ–Ω—è!",
    ]
    
    KILL_PROMPTS_QUAD = [
        "–ö–í–ê–î–†–û –ö–ò–õ–õ!!! –ß–µ—Ç—ã—Ä–µ –í–†–ê–ì–ê! –≠–¢–û –ü–ò–ö –ú–ê–°–¢–ï–†–°–¢–í–ê!",
        "–ö–í–ê–î!!! –≠—Ç–æ –∂–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ! –ß–µ—Ç—ã—Ä–µ –∑–∞ —Ä–∞–∑!",
        "–ß–ï–¢–´–†–ï –ö–ò–õ–õ–ê!!! –¢—ã –ø—Ä–æ—Å—Ç–æ –º–æ–Ω—Å—Ç—Ä! üíÄ",
    ]
    
    KILL_PROMPTS_ACE = [
        "–ê–°–ï!!! –ü–Ø–¢–¨ –ö–ò–õ–õ!!! –¢–´ –õ–ï–ì–ï–ù–î–ê!!! üëë",
        "–ü–ï–ù–¢–ê–ö–ò–õ–õ!!! –ù–ï–í–ï–†–û–Ø–¢–ù–û!!! –ü–Ø–¢–¨ –§–†–ê–ì–û–í –í –†–ê–£–ù–î–ï!!!",
        "–ê–°–ï!!! –¢–´ –°–¢–ê–õ –ë–û–ì–û–ú CS2!!! –≠–¢–û –ü–ò–ö –ú–ê–°–¢–ï–†–°–¢–í–ê!!!",
        "–ü–Ø–¢–¨ –ö–ò–õ–õ!!! –ü–û–õ–û–í–ò–ù–ê –ö–û–ú–ê–ù–î–´ –í–†–ê–ì–ê –ü–û–í–ê–õ–ï–ù–ê –¢–û–ë–û–ô!!! üî•üî•üî•",
    ]
    
    # ============================================================
    # –°–ú–ï–†–¢–¨ –ü–†–û–ú–ü–¢–´ - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ
    # ============================================================
    
    DEATH_PROMPTS = [
        "–£–ø–∞–ª, –Ω–æ –Ω–µ —Å–¥–∞—ë–º—Å—è! –°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ –±—É–¥–µ—Ç –ª—É—á—à–µ!",
        "–°–º–µ—Ä—Ç—å - –µ—â—ë –Ω–µ –∫–æ–Ω–µ—Ü! –°–º–æ—Ç—Ä–∏–º –≤–∏–¥–µ–æ–ø–æ–≤—Ç–æ—Ä –∏ —É—á–∏–º—Å—è!",
        "–ù–µ —Å—Ç—Ä–∞—à–Ω–æ, –±—ã–≤–∞–µ—Ç! –°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ –º—ã –∏—Ö –≤—Å–µ—Ö —Ä–∞–∑–º–∞–∂–µ–º!",
        "–£–ø–∞–ª... –ù–æ –∏—Å—Ç–æ—Ä–∏—è –Ω–µ –∑–∞–∫–æ–Ω—á–µ–Ω–∞! –í–µ—Ä–Ω—ë–º—Å—è —Å–∏–ª—å–Ω–µ–µ!",
        "–°–º–æ—Ç—Ä–∏–º —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ... –í—Ä–∞–≥–æ–≤ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ?",
        "–£–ø–∞–ª –≤ –±–æ—é. –ü–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –ø–ª–æ—Ö–æ–π? –ë—É–¥–µ–º –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ!",
        "–û–Ω–∏ –Ω–∞—Å –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —É–¥–µ—Ä–∂–∞—Ç! –û—Ç–æ–º—Å—Ç–∏–º!",
        "–û–¥–∏–Ω –º–∏–Ω—É—Å –Ω–∞—Å, –Ω–æ –∂–∞—Ä –≤ –≥—Ä—É–¥–∏ –Ω–µ —É–≥–∞—Å–∞–µ—Ç!",
    ]
    
    # ============================================================
    # –ö–†–ò–¢–ò–ß–ù–û–ï –ó–î–û–†–û–í–¨–ï
    # ============================================================
    
    LOW_HEALTH_CRITICAL = [
        "–ö–†–ò–¢–ò–ß–ù–û –•–ü! {health} –∑–¥–æ—Ä–æ–≤—å—è! –ü—Ä—è—á—å—Å—è –∏–ª–∏ –ª–µ—á–∏—Å—å –ù–ï–ú–ï–î–õ–ï–ù–ù–û!",
        "–•–ü –í –ö–†–ò–¢–ò–ö–ï! {health} HP! –û–¢–°–¢–£–ü–ê–ô! –û–¢–°–¢–£–ü–ê–ô!",
        "–°–ú–ï–†–¢–ï–õ–¨–ù–´–ô –•–ü! {health}! –°–ü–ï–®–ò–ú –õ–ï–ß–ò–¢–¨–°–Ø!",
        "–†–ê–ù–ï–ù–´–ô! {health} –∂–∏–∑–Ω–∏! –ù–∞–π–¥–∏ —É–∫—Ä—ã—Ç–∏–µ –°–ï–ô–ß–ê–°!",
        "–ü–û–ß–¢–ò –ú–Å–†–¢–í! {health} –•–ü! –í–†–ê–ì–ò –ß–£–Æ–¢ –ó–ê–ü–ê–• –ö–†–û–í–ò!",
    ]
    
    LOW_HEALTH_WARNING = [
        "–•–ü –Ω–∏–∑–∫–æ, {health} –∑–¥–æ—Ä–æ–≤—å—è. –ë—É–¥—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ –≤ –ø–æ—Ç–∞—Å–æ–≤–∫–∞—Ö!",
        "–†–∞–Ω–µ–Ω –Ω–∞ {health}. –ë–µ—Ä–µ–≥–∏ —Å–µ–±—è!",
        "–ó–¥–æ—Ä–æ–≤—å–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –Ω–∏–∑–∫–æ - {health}. –ù–µ –ª–µ–∑—å –≤ –≥–æ—Ä—è—á—É—é —Ç–æ—á–∫—É!",
        "–ù–∞ {health} –•–ü. –õ—É—á—à–µ –æ—Ç—Å—Ç—É–ø–∏ –Ω–µ–º–Ω–æ–≥–æ!",
    ]
    
    # ============================================================
    # –ö–†–ò–¢–ò–ß–ù–´–ô –ó–ê–ü–ê–° –ü–ê–¢–†–û–ù–û–í
    # ============================================================
    
    LOW_AMMO_CRITICAL = [
        "–ü–ê–¢–†–û–ù–´ –ö–û–ù–ß–ò–õ–ò–°–¨!!! –û—Å—Ç–∞–ª–æ—Å—å {ammo}! –°–¢–ê–ù–û–í–ò–°–¨ –í –ó–ê–©–ò–¢–£!",
        "–ë–û–ï–ü–†–ò–ü–ê–°–´ –ó–ê–ö–û–ù–ß–ò–õ–ò–°–¨! {ammo} –≤ –∑–∞–ø–∞—Å–µ! –≠–ö–û–ù–û–ú–¨ –ö–ê–ñ–î–´–ô –í–´–°–¢–†–ï–õ!",
        "–ö–†–ò–¢–ò–ß–ù–´–ô –ó–ê–ü–ê–°! {ammo} –ø–∞—Ç—Ä–æ–Ω–æ–≤! –°–ß–ò–¢–ê–ô –í–´–°–¢–†–ï–õ–´!",
        "–ü–û–ß–¢–ò –ë–ï–ó –ü–ê–¢–†–û–ù–û–í! {ammo}! –ë–ï–†–ï–ì–ò–°–¨!",
    ]
    
    LOW_AMMO_WARNING = [
        "–ü–∞—Ç—Ä–æ–Ω–æ–≤ –º–∞–ª–æ, {ammo} –≤ –∑–∞–ø–∞—Å–µ. –ù–∞—á–Ω–∏ —Å—á–∏—Ç–∞—Ç—å –≤—ã—Å—Ç—Ä–µ–ª—ã!",
        "–ë–æ–µ–ø—Ä–∏–ø–∞—Å—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è - {ammo}. –≠–∫–æ–Ω–æ–º—å –∏—Ö!",
        "–ó–∞–ø–∞—Å –ø–∞—Ç—Ä–æ–Ω–æ–≤: {ammo}. –ú–æ–∂–µ—Ç –±—ã—Ç—å, –ø–æ–º—ã—à–ª—è—Ç—å –æ –Ω–æ–≤–æ–º –æ—Ä—É–∂–∏–∏?",
    ]
    
    # ============================================================
    # –ö–ò–õ–õ –°–¢–†–ò–ö–ò
    # ============================================================
    
    MEGA_KILL_STREAK = [
        "–ú–ï–ì–ê –ö–ò–õ–õ –°–¢–†–ò–ö –ù–ê {streak}!!! –¢–´ –°–¢–ê–õ –ß–£–ú–û–ô!!! üî•üî•üî•",
        "–ö–ò–õ–õ –°–¢–†–ò–ö {streak}!!! –í–†–ê–ì–ò –ü–ê–ù–ò–ö–£–Æ–¢!",
        "–ù–ï–í–ï–†–û–Ø–¢–ù–û! {streak} –ö–ò–õ–õ –ü–û–î–†–Ø–î!",
    ]
    
    HIGH_KILL_STREAK = [
        "–ö–∏–ª–ª —Å—Ç—Ä–∏–∫ –Ω–∞ {streak}! –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ!",
        "–£–∂–µ {streak} –∫–∏–ª–ª –ø–æ–¥—Ä—è–¥! –í—Ä–∞–≥–∏ —Ç–µ–±—è –±–æ—è—Ç—Å—è!",
    ]
    
    # ============================================================
    # –≠–ö–û–ù–û–ú–ò–ß–ï–°–ö–ò–ï –°–û–í–ï–¢–´
    # ============================================================
    
    MONEY_ECO = [
        "–î–µ–Ω–µ–≥ —Å–æ–≤—Å–µ–º –Ω–µ—Ç. –ü–æ–ª–Ω–∞—è —ç–∫–æ–Ω–æ–º —Ç–∞–∫—Ç–∏–∫–∞! –ö–æ–ø–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π!",
        "–§–∏–Ω–∞–Ω—Å–æ–≤–æ –Ω–∞ –¥–Ω–µ. –í–æ–∑—å–º–∏ –ø–∏—Å—Ç–æ–ª–µ—Ç –∏ –±–µ—Ä–µ–≥–∏ —Å–µ–±—è!",
    ]
    
    MONEY_LOW = [
        "–î–µ–Ω–µ–≥ –º–∞–ª–æ ({money}). –ù–µ —Ç—Ä–∞—Ç—å—Å—è! –ö–æ–ø–∏ –Ω–∞ –∑–∞–∫—É–ø–∫—É!",
        "–§–∏–Ω–∞–Ω—Å—ã –Ω–∏–∑–∫–æ. –≠–∫–æ–Ω–æ–º—å –≤—Å—ë!",
    ]
    
    MONEY_HALF_BUY = [
        "–î–µ–Ω–µ–≥ {money} - –ø–æ–ª–æ–≤–∏–Ω–Ω–∞—è –∑–∞–∫—É–ø–∫–∞. –í–æ–∑—å–º–∏ –±—Ä–æ–Ω—é –∏ –ø–∏—Å—Ç–æ–ª–µ—Ç!",
        "–°—Ä–µ–¥–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å—ã. –•–≤–∞—Ç–∏—Ç –Ω–∞ –ø–æ–ª—É—Å—Ä–µ–¥–Ω–∏–π –Ω–∞–±–æ—Ä!",
    ]
    
    MONEY_FULL_BUY = [
        "–î–ï–ù–ï–ì {money}! –ü–û–õ–ù–ê–Ø –ó–ê–ö–£–ü–ö–ê! –ë–ï–†–ò–°–¨ –ó–ê –õ–£–ß–®–ï–ï –û–†–£–ñ–ò–ï! üî´",
        "–ü–û–õ–ù–´–ô –ë–Æ–î–ñ–ï–¢! –ó–ê–ö–£–ü–ê–ô–°–Ø –ù–ê –ü–û–õ–ù–£–Æ!",
    ]
    
    # ============================================================
    # –°–ò–¢–£–ê–¶–ò–û–ù–ù–´–ï
    # ============================================================
    
    BOMB_PLANTED = [
        "–ë–û–ú–ë–ê –ó–ê–õ–û–ñ–ï–ù–ê! –ó–∞—â–∏—â–∞–µ–º—Å—è –∏–ª–∏ —Ä–∞–∑–º–∏–Ω–∏—Ä—É–µ–º!",
        "–ë–û–ú–ë–ê –ü–û–°–¢–ê–í–õ–ï–ù–ê! –í—Ä–∞–≥–∏ —É—Ö–æ–¥—è—Ç –≤ –∑–∞—â–∏—Ç—É!",
    ]
    
    CLUTCH_SITUATION = [
        "CLUTCH! –¢—ã –æ–¥–∏–Ω –ø—Ä–æ—Ç–∏–≤ {enemies}! –ü–û–ö–ê–ñ–ò –ò–ú!",
        "–û–¥–∏–Ω –ø—Ä–æ—Ç–∏–≤ {enemies}! –ù–ï–í–ï–†–û–Ø–¢–ù–ê–Ø –í–û–ó–ú–û–ñ–ù–û–°–¢–¨!",
    ]
    
    STRATEGIC_TIPS = [
        "–í—Ä–∞–≥ —á–∏—Å–ª–µ–Ω–Ω–æ –≤—ã—à–µ. –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–∑–∏—Ü–∏–∏!",
        "–ß–∏—Å–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ! –î–∞–≤–∞–π –≤—Ä–∞–≥–∞ –∞–∫—Ç–∏–≤–Ω–æ!",
        "–†–∞—É–Ω–¥ –∏–¥—ë—Ç –ø–ª–æ—Ö–æ. –ü–æ–º–µ–Ω—è–π –ø–æ–∑–∏—Ü–∏—é!",
        "–í—Ä–∞–≥–∏ –∑–∞ –Ω–∞–º–∏ —Å–ª–µ–¥—è—Ç. –°–º–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏!",
    ]
    
    def build_kill_prompt(self, context: Dict, situation_type: Optional[str] = None) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–∏–ª–ª–∞"""
        round_kills = context.get('round_kills', 1)
        
        if round_kills >= 5:
            prompts = self.KILL_PROMPTS_ACE
        elif round_kills >= 4:
            prompts = self.KILL_PROMPTS_QUAD
        elif round_kills >= 3:
            prompts = self.KILL_PROMPTS_TRIPLE
        elif round_kills >= 2:
            prompts = self.KILL_PROMPTS_DOUBLE
        else:
            prompts = self.KILL_PROMPTS_SINGLE
        
        return random.choice(prompts)
    
    def build_death_prompt(self) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è —Å–º–µ—Ä—Ç–∏"""
        return random.choice(self.DEATH_PROMPTS)
    
    def build_low_health_prompt(self, health: int) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –•–ü"""
        if health <= 15:
            return random.choice(self.LOW_HEALTH_CRITICAL).format(health=health)
        else:
            return random.choice(self.LOW_HEALTH_WARNING).format(health=health)
    
    def build_low_ammo_prompt(self, ammo: int) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø–∞—Ç—Ä–æ–Ω–æ–≤"""
        if ammo <= 3:
            return random.choice(self.LOW_AMMO_CRITICAL).format(ammo=ammo)
        else:
            return random.choice(self.LOW_AMMO_WARNING).format(ammo=ammo)
    
    def build_money_prompt(self, money: int) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –ø–æ —Ñ–∏–Ω–∞–Ω—Å–∞–º"""
        if money < 1000:
            return random.choice(self.MONEY_ECO).format(money=money)
        elif money < 2400:
            return random.choice(self.MONEY_LOW).format(money=money)
        elif money < 5000:
            return random.choice(self.MONEY_HALF_BUY).format(money=money)
        else:
            return random.choice(self.MONEY_FULL_BUY).format(money=money)
    
    def build_kill_streak_prompt(self, streak: int) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–∏–ª–ª —Å—Ç—Ä–∏–∫–∞"""
        if streak >= 10:
            return random.choice(self.MEGA_KILL_STREAK).format(streak=streak)
        elif streak >= 3:
            return random.choice(self.HIGH_KILL_STREAK).format(streak=streak)
        return ""
    
    def build_bomb_prompt(self) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è –±–æ–º–±—ã"""
        return random.choice(self.BOMB_PLANTED)
    
    def build_clutch_prompt(self, enemies: int) -> str:
        """–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è clutch"""
        return random.choice(self.CLUTCH_SITUATION).format(enemies=enemies)
    
    def build_strategic_tip(self) -> str:
        """–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç"""
        return random.choice(self.STRATEGIC_TIPS)
    
    def build_contextual_prompt(self, situations: List[str], context: Dict) -> Optional[str]:
        """–£–º–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–º–ø—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏—Ç—É–∞—Ü–∏–π"""
        
        if 'LOW_HEALTH_CRITICAL' in situations:
            return self.build_low_health_prompt(context.get('health', 50))
        
        if 'LOW_AMMO_CRITICAL' in situations:
            return self.build_low_ammo_prompt(context.get('ammo_total', 5))
        
        if 'ACE' in situations or 'MULTI_KILL_ROUND' in situations:
            return self.build_kill_prompt(context)
        
        if 'CLUTCH' in situations:
            return self.build_clutch_prompt(context.get('enemy_alive', 5))
        
        if 'BOMB_PLANTED' in situations:
            return self.build_bomb_prompt()
        
        if 'MEGA_KILL_STREAK' in situations:
            return self.build_kill_streak_prompt(context.get('kill_streak', 10))
        
        if random.random() < 0.3:
            return self.build_strategic_tip()
        
        return None
