# unique tmp marker 239847
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
CS2 GSI Launcher - ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ‚ĞµĞ»ÑŒ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
"""

import sys
import logging
from pathlib import Path

# Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒ Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºÑƒÑ Ğ¿Ğ°Ğ¿ĞºÑƒ Ğ² path
sys.path.insert(0, str(Path(__file__).parent))

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ›ĞĞ“Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - [%(name)s] - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ˜ĞœĞŸĞĞ Ğ¢Ğ«
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

try:
    from src.cs2_gsi import CS2GameStateIntegration, GameEvent
    logger.info("âœ… CS2 GSI Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾")
except Exception as e:
    logger.error(f"âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ° cs2_gsi: {e}")
    sys.exit(1)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CALLBACK - Ñ‡Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¸
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def handle_game_event(event: GameEvent):
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¸Ğ· CS2"""
    logger.info(f"\n{'='*60}")
    logger.info(f"[EVENT] Ğ¢Ğ¸Ğ¿: {event.event_type}")
    logger.info(f"[EVENT] Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ: {event.data}")
    logger.info(f"[EVENT] Ğ’Ñ€ĞµĞ¼Ñ: {event.timestamp}")
    logger.info(f"{'='*60}\n")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ“Ğ›ĞĞ’ĞĞ«Ğ™ ĞšĞĞ”
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def main():
    logger.info("ğŸ® CS2 GSI LAUNCHER - Ğ—Ğ°Ğ¿ÑƒÑĞº")
    logger.info("="*60)
    
    try:
        # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¸Ğ½ÑÑ‚Ğ°Ğ½Ñ GSI
        gsi = CS2GameStateIntegration(
            port=3000,
            event_callback=handle_game_event
        )
        
        # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€
        gsi.start()
        
        logger.info("ğŸ® CS2 GSI Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ°")
        logger.info("ğŸ“ Ğ¡Ğ»ÑƒÑˆĞ°Ñ Ğ½Ğ° http://localhost:3000/")
        logger.info("â³ Ğ–Ğ´Ñƒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¸Ğ· CS2...")
        logger.info("ğŸ® Ğ•ÑĞ»Ğ¸ Ñ‚Ñ‹ Ğ² Ğ¼Ğ°Ñ‚Ñ‡Ğµ Ğ¸ ÑƒĞ±ÑŒÑ‘ÑˆÑŒ ĞºĞ¾Ğ³Ğ¾-Ñ‚Ğ¾ - Ğ·Ğ´ĞµÑÑŒ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ!")
        logger.info("ğŸ›‘ Ğ”Ğ»Ñ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ½Ğ°Ğ¶Ğ¼Ğ¸ Ctrl+C")
        logger.info("="*60)
        
        # Ğ‘ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» - ÑĞ»ÑƒÑˆĞ°ĞµĞ¼ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
        import time
        while True:
            time.sleep(1)
    
    except KeyboardInterrupt:
        logger.info("\nğŸ›‘ Ğ’Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ...")
        gsi.stop()
        logger.info("âœ… GSI Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°")
    
    except Exception as e:
        logger.error(f"âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: {e}")
        import traceback
        traceback.print_exc()
        sys.exit(1)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ğ¢ĞĞ§ĞšĞ Ğ’Ğ¥ĞĞ”Ğ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if __name__ == '__main__':
    main()
